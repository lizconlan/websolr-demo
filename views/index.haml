%html
  %head
    %title Search
    %style 
      body {width:60em;margin:6em auto;line-height:140%;}
      div.result {border-bottom:1pt dotted gray;padding:1em 2em;margin:1em 0;}
      div.result .title {font-weight:bold;font-size:1.4em;display:block;}
  %body
    %form
      %input{:name => "q", :value => @q}
      %input{:type => "Submit", :value => "Search"}
    - if @q
      #results
        ="Showing #{page_info} of #{@found} results for <b>#{h(@q)}</b>"
        - if @section_filter
          %b
            Showing results from #{@section_filter}
        - else
          - if @section_facets and @section_facets.length > 1
            %ul.sections
              - @section_facets.each do |section|
                %li.section
                  %a{:href => "?q=#{params[:q]}&section=#{section[:name]}"}= "#{section[:name]} (#{section[:count]})"
               
        - @docs.each do |doc|
          .result
            - house_initial = doc['house_ss'][0,1]
            %span.title= doc['subject_ss']
            %span.ref
              %a{:href => doc['url_ss']}
                %span.house= "H#{house_initial} " 
                = "Deb vol " + doc['volume_ss']
                - if doc['columns_ss']
                  =' cc' + doc['columns_ss']
                -if doc['part_ss']
                  =' (Part ' + doc['part_ss'] + ')'
            %br
            %span.section= doc['section_ss']
            - if doc['chair_ss']
              %p.chair= 'Chair: ' + doc['chair_ss']
            
            %ul.members
              - doc['members_texts'].each do |member|
                %li.member= member
