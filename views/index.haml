!!! 5
%html
  %head
    %title 
      - unless @q
        Hansard Search
      - else
        = @q + ' (Hansard Search)'
    %style
      body{width:40em;margin:4em auto;font-family:Helvetica,sans-serif}
      div.result{padding:0.9em 0}
      div.result big{display:block}
      div.result span.breadcrumbs{display:block;color:green;padding-bottom:0.1em}
      div.result span.breadcrumbs a{color:green;text-decoration:none}
      div.result span.breadcrumbs a:hover{text-decoration:underline}
      div.result span.text{line-height:1.25em}
      div.result span.text em{font-weight:bold;font-style:normal}
      div.result span.citation{font-size:0.9em;display:block;color:gray;padding:0.1em 0}
      div.result span.contributors{font-size:0.9em;display:block;color:gray;padding:0.1em 0}
      nav{float:right}
  %body
    %header
      %nav
        %a{:href=>"/"} HansardSearch
      %form
        %input{:name => 'q', :value => @q, :placeholder=>"Search"}
        %button{:type=>'submit'} Search
    %section
      - if @q
        - if @section_filter
          #showing-only
            Showing only results from <strong>#{@section_filter}</strong>
            %a{:href => "?q=#{params[:q]}"}
              Show all
        - if @section_facets and @section_facets.length > 1
          %ul
            %li All Hansard content
            - @section_facets.each do |section|
              %li
                %a{:href => "?q=#{params[:q]}&section=#{section[:name]}",
                   :title => "#{section[:name]} items"}= section[:name]
        - @results.each do |result|
          %div.result
            %big.title
              %a{:href => result['url_ss'], :title => result['url_ss']}
                = prepare_title(result['subject_ss'], @q)
            %span.breadcrumbs= url_segments_line(result['house_ss'], result['section_ss'], result['published_at_ds'], result['url_ss'], result['department_ss'])
            %span.citation
              = 'H' + result['house_ss'][0,1] + ' Deb vol ' + result['volume_ss']
              = ' cc' + result['columns_ss'] if result['columns_ss']
              = ' (Part ' + result['part_ss'] + ')' if result['part_ss']
              = ' - Question: ' + result['question_ss'] if result['question_ss']
              = ' - Chair: ' + result['chair_ss'] if result['chair_ss']
            %span.text
              = top_and_tail @highlights[result['id']]
            %span.contributors
              Contributors:
              = prepare_contributors(result['members_texts'])
              
            
                    
      %footer       
        %p &copy; UK Parliament     
      - if @q
        %p=haml :_pagination